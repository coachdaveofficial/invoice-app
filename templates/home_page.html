{% extends 'base.html' %}

{% block body_class %}{% endblock %}

{% block content %}



<div class="mt-4 container-fluid">	
		<div class="col-md-4">
			<table class="table table-sm table-hover table-bordered">
				<thead>
					<tr>
						<th>
							#
						</th>
						<th>
							Invoice I.D.
						</th>
						<th>
							Total Cost
						</th>
						<th>
							Amount Paid
						</th>
						<th>
							Due Date
						</th>
						<th>
							Status
						</th>
					</tr>
				</thead>
				<tbody>
					{% for invoice in invoices %}
					<tr>
						<td>
							{{loop.index}}
						</td>
						<td>
							{{invoice.id}}
						</td>
						<td>
							{{invoice.total_cost}}
						</td>
						<td>
							Default
						</td>
						<td>
							{{invoice.due_date}}
						</td>
						<td>
							Status
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>

			
			
				{% for c in companies %}
				<ul>
					<li>
						
					</li>
					<li>
						{{c.customers[0].full_name}}
					</li>
					<li>
						{{c.invoices}}
					</li>
					<li>
						
						{{c.services}}
					</li>
					<li>
						{{c.users}}
					</li>
				</ul>
				{% endfor %}

			








            <!-- <div class="list-group">
                <h4 class="list-group-item-heading">
                    Invoices 
                </h4>
				<a href="#" class="mb-2 badge bg-primary">Click here view all outstanding invoices</a>
				{% for payment in payment_history %}
				<div class="list-group-item">
					<div class="row">
						{% if payment.due_date < payment.curr_date %}
						<div class="col-12 text-center">
							<p class="badge bg-warning text-dark">Warning! Invoice is overdue.</p>
						</div>
						{% endif %}
						<div class="col">
							<div class="badge bg-info">
								Invoice #{{payment.invoice_id}}
							</div>
						</div>
						<div class="col">
							<div class="badge bg-secondary">
								Total Cost: {{payment.total_cost}}
							</div>
						</div>
						<div class="col">
							<div class="badge bg-primary">
								Amount paid: {{ (payment.total_cost - payment.amount_left) }}
							</div>
						</div>
					</div>
					<p class="mt-2 mb-0">
						{% for c in customers %}
						{% if c.id == payment.customer_id %}
						<div class="row">
							<div class="col">
								{{c.full_name}} has <span class="badge bg-secondary">{{ "$%.2f"|format	(payment.amount_left) }}</span> left to pay off.
							</div>
						</div>
						<div class="row">
							<div class="col mt-2">
								{% if payment.due_date < payment.curr_date %}
								Due date was <u>{{payment.due_date}}</u>
								{% else %}
								<u>Due date: {{payment.due_date}}.</u>
								{% endif %}

							</div>
						</div>
						{% endif %}
						{% endfor %}
 					</p>
				</div>
				{% endfor %}
			</div> -->

		</div>

		<div class="col-md-6 ">
			<h4>Estimates</h4>
			<button type="button" class="btn btn-primary collapsed" data-bs-toggle="collapse" data-bs-target="#estimates">Create an estimate.</button>
			<div id="estimates" class="collapse">
				<a href="/services/add" class="badge bg-secondary">Create New Service</a>
				<div id="estimate-form" class="form-group m-2">
					<div class="text-center">
						<label class="form-label" for="services-options">Select service to add to estimate:</label>
						<select name="services" id="services-options" class="form-select">
							{% for service in services %}
							<option value="{{service.id}}">{{service.description}}</option>
							{% endfor %}
						</select>
						<a href="#" id="add-service-estimate" class="btn-sm btn-primary bg-dark">Add Service</a>
					</div>
				</div>
					<ol class="list-group list-group-numbered" id="estimate-list">

					</ol>
					<ol class="list-group">
						<li class="list-group-item">
							<div class="ms-2 me-auto">
								<div><b>Total</b></div>

							</div>
							<span id="estimate-total" class="badge bg-primary">0</span>
						</li>
					</ol>
			</div>
		</div>

		<div class="col">
			<div class="list-group">
                <h4 class="list-group-item-heading text-center">
                    Yearly Revenue: <span class="badge bg-success">{{yearly_revenue}}</span>
                </h4>
				<div class="list-group-item">
					
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}